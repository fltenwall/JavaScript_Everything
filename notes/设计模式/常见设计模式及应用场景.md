
#### 设计原则

开放-封闭原则：对扩展开放，对修改封闭。可以扩展新的功能，但是现有功能保持原子性不可修改，保证功能稳定性

#### 何为技术方案设计

组件结构设计、API 设计、数据结构设计

#### 工厂模式

用工厂函数创建实例，隐藏new及参数的处理逻辑封装

1. 比如jquery的`$`函数
2. React中的`createElement`函数创建 VNode

#### 单例模式

只能创建全局唯一实例，无法创建第二个

1. 比如`Vuex`、`Redux`中的store，全局唯一。
2. 全局唯一的`Dialog modal`弹层

```typescript
class Factory{
    private constructor(){}
    private static factory:Factory = new Factory() 
    public static getFactory():Factory{
        return this.factory
    }
    fn1(){}
}

const f1 = Factory.getFactory()
const f2 = Factory.getFactory()
console.log(f1 === f2) // true
```

js 一般是单线程执行的，创建单例不会存在重复问题。但如果在类似java这种多线程语言中，要考虑锁死线程，因为多线程共享进程内存，如果多个线程同时创建，会出现重复问题。

#### 代理模式

使用者不能直接访问对象，而是访问一个代理层，在代理层可以进行监听拦截进行很多逻辑处理

1. Vue3中使用`proxy`代理实现数据响应式

#### 观察者模式

一个主题，一个观察者，主题变化之后触发观察者执行

1. 比如dom监听，一个dom可以添加很多监听函数，dom改变时可以通过触发动作执行回调函数

```html
<button id='btn'></button>
<script>
    btn.addEventListener('click', ()=>{...})
</script>
```

#### 发布订阅模式

1. vue组件通讯中通过自定义事件数据传递和事件执行
2. EventBus

注意：vue中绑定的事件要用独立函数绑定，要及时解绑事件，防止内存泄漏。例如`mounted`中绑定，`beforeUnmount`中解除绑定

与观察者模式的区别：

观察者模式中的主题和观察者是直接绑定一起出现的，发布订阅模式中需要收集订阅的事件，然后统一发布

#### 装饰器模式

原来的功能不变，增加新的功能，即 AOP 面向切面编程

1. js和ts中的`Decorator`语法
2. nestjs 中的路由装饰器



